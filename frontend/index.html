<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ú–æ–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç‚Äë–º–∞–≥–∞–∑–∏–Ω</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>–ú–∞–≥–∞–∑–∏–Ω</h1>
    <p class="hint">–ï—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–µ—à—å –ª–æ–∫–∞–ª—å–Ω–æ ‚Äî –æ—Å—Ç–∞–≤—å –∞–¥—Ä–µ—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø–æ–º–µ–Ω—è–π BACKEND_URL –Ω–∞ —Å–≤–æ–π Railway URL.</p>
  </header>

  <main>
    <div id="products" class="grid"></div>
  </main>

  <footer>
    <small>–ü—Ä–æ—Ç–æ—Ç–∏–ø –º–∞–≥–∞–∑–∏–Ω–∞ –Ω–∞ JS. –ó–∞–∫–∞–∑—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ backend.</small>
  </footer>

  <script>
    // üëâ –õ–û–ö–ê–õ–¨–ù–û: http://localhost:3000
    // üëâ –ü–û–°–õ–ï –î–ï–ü–õ–û–Ø: –∑–∞–º–µ–Ω–∏ –Ω–∞ https://<—Ç–≤–æ–µ-–∏–º—è>.up.railway.app
    const BACKEND_URL = "http://localhost:3000";

    async function loadProducts() {
      const res = await fetch(BACKEND_URL + "/products");
      const products = await res.json();
      const container = document.getElementById("products");
      container.innerHTML = products.map(p => `
        <div class="card">
          <h3>${p.name}</h3>
          <p class="price">${p.price} ‚ÇΩ</p>
          <button onclick='order(${JSON.stringify(p)})'>–ö—É–ø–∏—Ç—å</button>
        </div>
      `).join("");
    }

    async function order(product) {
      const name = prompt("–í–∞—à–µ –∏–º—è?");
      const phone = prompt("–í–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω?");
      if (!name || !phone) return alert("–ù—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω.");
      const res = await fetch(BACKEND_URL + "/order", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ productId: product.id, product: product.name, price: product.price, name, phone })
      });
      const data = await res.json();
      alert(data.message || "–ì–æ—Ç–æ–≤–æ");
    }

    loadProducts();
  </script>
</body>
</html>
